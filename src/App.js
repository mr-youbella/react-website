import './App.css';
import { useState } from 'react';

function App()
{
	let initMap =
	[
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0'],
		['0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['Z', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '1', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0'],
		['0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', 'Z', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
		['0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', 'Z', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0', '0'],
	];
	let [map, setMap] = useState(initMap);

	function setColor(value)
	{
		if (value === '0')
			return ("w-10 h-10 bg-blue-600 duration-1000");
		if (value === 'Z')
			return ("w-10 h-10 bg-gray-400")
		return ("w-10 h-10 bg-green-600 rounded-3xl")
	}

	onkeydown = (event) =>
	{
		let x, y;
		let newMap = map.map((value) => (value.map((col) => (col === '1' ? '0' : col))));
		for (let i = 0; map[i]; i++)
		{
			for (let j = 0; map[i][j]; j++)
			{
				if (map[i][j] === '1')
				{
					y = i;
					x = j;
				}
			}
		}
		if (event.key === "ArrowUp")
		{
			if (newMap[y - 1])
				y--;
			else
				y = 19;
		}
		if (event.key === "ArrowDown")
		{
			if (newMap[y + 1])
				y++;
			else
				y = 0;
		}
		if (event.key === "ArrowLeft")
		{
			if (newMap[y][x - 1])
				x--;
			else
				x = 29;
		}
		if (event.key === "ArrowRight")
		{
			if (newMap[y][x + 1])
				x++;
			else
				x = 0;
		}
		newMap[y][x] = '1';
		setMap(newMap);
	};

	return (
		<div className="h-screen flex flex-col bg-amber-400 items-center justify-center">
			{
				map.map((value, index) => (<div key={index} className="flex">{value.map((value, index) => (<div className="bg-blue-600"><div key={index} className={setColor(value)}></div></div>))}</div>))
			}
		</div>
	);
}

export default App;
